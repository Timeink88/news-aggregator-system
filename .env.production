# =============================================================================
# 新闻聚合系统 - 生产环境配置模板
# News Aggregator System - Production Environment Configuration
# =============================================================================

# =============================================================================
# 基础应用配置
# =============================================================================
NODE_ENV=production
PORT=3000
HOST=0.0.0.0
TZ=Asia/Shanghai
APP_NAME=news-aggregator
APP_VERSION=1.0.0
DEBUG=false

# =============================================================================
# Supabase 数据库配置
# =============================================================================
SUPABASE_URL=your_supabase_project_url
SUPABASE_KEY=your_supabase_anon_key
SUPABASE_SERVICE_ROLE_KEY=your_supabase_service_role_key

# 生产环境存储配置
SUPABASE_MAX_STORAGE_MB=500
SUPABASE_STORAGE_WARNING_THRESHOLD=0.8
SUPABASE_STORAGE_CRITICAL_THRESHOLD=0.95

# 连接池配置 (生产环境)
SUPABASE_POOL_MAX=20
SUPABASE_POOL_MIN=5
SUPABASE_POOL_IDLE_TIMEOUT=30000
SUPABASE_POOL_CONNECTION_TIMEOUT=10000

# 超时配置 (生产环境)
SUPABASE_CONNECT_TIMEOUT=30000
SUPABASE_READ_TIMEOUT=30000
SUPABASE_WRITE_TIMEOUT=30000

# 重试配置 (生产环境)
SUPABASE_MAX_RETRIES=5
SUPABASE_RETRY_DELAY=1000

# 缓存配置 (生产环境)
SUPABASE_CACHE_ENABLED=true
SUPABASE_CACHE_TTL=3600
SUPABASE_CACHE_MAX_SIZE=1000

# =============================================================================
# AI服务配置
# =============================================================================
# DeepSeek-V3.1 AI 配置
DEEPSEEK_BASE_URL=your_deepseek_base_url
DEEPSEEK_API_KEY=your_deepseek_api_key
DEEPSEEK_MODEL=DeepSeek-V3.1

# NewsAPI 配置
NEWSAPI_KEY=your_newsapi_key

# AI 成本限制 (生产环境)
AI_MONTHLY_BUDGET=50.0
AI_WARNING_THRESHOLD=0.6
AI_CRITICAL_THRESHOLD=0.8

# =============================================================================
# 邮件服务配置
# =============================================================================
# SMTP邮件配置
SMTP_HOST=your_smtp_host
SMTP_PORT=465
SMTP_USER=your_smtp_user@domain.com
SMTP_PASS=your_email_password
FROM_EMAIL=your_smtp_user@domain.com
TO_EMAIL=recipient@domain.com

# =============================================================================
# Redis 缓存配置
# =============================================================================
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=your_redis_password
REDIS_DB=0
REDIS_TTL=7200

# =============================================================================
# 安全配置
# =============================================================================
# JWT 配置
JWT_SECRET=your_jwt_secret_key_at_least_64_characters_long
JWT_EXPIRES_IN=7d
JWT_REFRESH_EXPIRES_IN=30d

# API 密钥配置
API_KEY_ENABLED=true
API_KEY_HEADER=X-API-Key
API_KEY=your_production_api_key

# 速率限制配置
RATE_LIMIT_ENABLED=true
RATE_LIMIT_WINDOW=900000
RATE_LIMIT_MAX_REQUESTS=100

# CORS 配置
CORS_ORIGIN=https://your-domain.com
CORS_CREDENTIALS=true

# =============================================================================
# 监控和健康检查配置
# =============================================================================
# 健康检查配置
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_INTERVAL=30000

# 存储监控配置
STORAGE_MONITOR_ENABLED=true
STORAGE_MONITOR_INTERVAL=300000

# 性能监控配置
PERFORMANCE_MONITOR_ENABLED=true
PERFORMANCE_MONITOR_INTERVAL=60000

# 监控配置
MONITORING_ENABLED=true
LOG_LEVEL=info
GRAFANA_PASSWORD=your_grafana_password

# =============================================================================
# 功能开关
# =============================================================================
# 启用的功能模块
ENABLE_RSS_SERVICE=true
ENABLE_NEWS_SERVICE=true
ENABLE_AI_SERVICE=true
ENABLE_EMAIL_SERVICE=true
ENABLE_WEB_SERVICE=true
ENABLE_SCHEDULER_SERVICE=true
ENABLE_CLEANUP_SERVICE=true

# 维护模式
MAINTENANCE_MODE=false

# =============================================================================
# 调度配置
# =============================================================================
# 每日新闻摘要推送时间
DAILY_DIGEST_HOUR=8
DAILY_DIGEST_MINUTE=0

# 实时推送配置
REALTIME_ENABLED=true
REALTIME_START_HOUR=7
REALTIME_END_HOUR=22
REALTIME_INTERVAL=15

# =============================================================================
# 新闻处理配置
# =============================================================================
MAX_ARTICLES_PER_SOURCE=20
SUMMARY_LENGTH=300
CACHE_TIMEOUT=7200000

# =============================================================================
# SSL证书配置
# =============================================================================
SSL_CERT_PATH=/etc/nginx/ssl/cert.pem
SSL_KEY_PATH=/etc/nginx/ssl/key.pem

# =============================================================================
# Docker 配置
# =============================================================================
# 数据卷配置
DATA_VOLUME_PATH=/app/data
LOGS_VOLUME_PATH=/app/logs
CONFIG_VOLUME_PATH=/app/config

# =============================================================================
# 注意事项
# =============================================================================
# 1. 这是生产环境配置，请确保所有密钥和密码都是安全的
# 2. 定期轮换 API 密钥和令牌
# 3. 监控系统资源使用情况
# 4. 配置适当的备份策略
# 5. 确保防火墙规则正确配置